import e from"@craigmorton/linebreak";function r(e){return e.length}class n{constructor(e,{measure:n=r,br:t="\n",nbsp:s=" ",shy:a="­",zwsp:i="​"}={}){this.measure=n,this.value=e.replace(new RegExp(t,"g"),"\n").replace(new RegExp(s,"g")," ").replace(new RegExp(a,"g"),"­").replace(new RegExp(i,"g"),"​")}get isEmpty(){return!this.value.replace(/\s/g,"").replace(new RegExp("\n","g"),"").replace(new RegExp(" ","g"),"").replace(new RegExp("­","g"),"").replace(new RegExp("​","g"),"")}wrap(r=Number.POSITIVE_INFINITY){const n=[],t=function(r){const n=new e(r),t={};for(;;){const e=n.nextBreak();if(!e)break;t[e.position]=e}return t}(this.value);let s=0;for(;s<this.value.length;){let e=s,a=0;for(;e<this.value.length;){if(t[e]&&t[e].required&&!t[e].consumed){t[e].consumed=!0,e--;break}if(a+=this.measure(this.value.charAt(e)),a>=r){const r=Object.values(t).reverse().find(({position:r,consumed:n})=>!n&&e>r);if(r){r.consumed=!0,e=r.position;break}}e++}for(const r in t)r>e||t[r]&&(t[r].consumed=!0);let i=this.value.substring(s,e).trim();"­"===this.value.charAt(e-1)&&(i+="-"),i=i.replace("­",""),n.push({value:i,width:this.measure(i)}),s=e}return{lines:n,overflow:!!n.find(e=>e.width>r)}}nowrap(e=Number.POSITIVE_INFINITY){const r=this.value.replace(new RegExp("\n","g"),"").replace(new RegExp(" ","g"),"").replace(new RegExp("­","g"),"").replace(new RegExp("​","g"),""),n=this.measure(r);return{lines:[{value:r,width:n}],overflow:n>e}}}export{n as default};
//# sourceMappingURL=wrappable-text.modern.js.map
